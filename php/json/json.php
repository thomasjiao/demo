#! /usr/bin/php5
<?php

/**
 * Indents a flat JSON string to make it more human-readable.
 * @param string $json The original JSON string to process.
 * @return string Indented version of the original JSON string.
 */
function indent($json) {

    $result = '';
    $pos = 0;
    $strLen = strlen($json);
    $indentStr = '    ';//格式化
    $newLine = "\n";
    $prevChar = '';
    $outOfQuotes = true;

    for ($i = 0; $i <= $strLen; $i++) {

// Grab the next character in the string.
        $char = substr($json, $i, 1);
// Are we inside a quoted string?
        if ($char == '"' && $prevChar != '\\') {
            $outOfQuotes = !$outOfQuotes;
// If this character is the end of an element,
// output a new line and indent the next line.
        } else if (($char == '}' || $char == ']') && $outOfQuotes) {
            $result .= $newLine;
            $pos --;
            for ($j = 0; $j < $pos; $j++) {
                $result .= $indentStr;
            }
        }
// Add the character to the result string.
        $result .= $char;
// If the last character was the beginning of an element,
// output a new line and indent the next line.
        if (($char == ',' || $char == '{' || $char == '[') && $outOfQuotes) {
            $result .= $newLine;
            if ($char == '{' || $char == '[') {
                $pos ++;
            }
            for ($j = 0; $j < $pos; $j++) {
                $result .= $indentStr;
            }
        }
        $prevChar = $char;
    }

    return $result;
}


$arr = '{"list1":{"308600000001_49551":{"room_id":"49551","name":"\u5367\u5ba4","list":{"1":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u7a7a\u8c03(\u683c\u529b)","brand":"\u683c\u529b","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"2":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u5ea7\u6905","brand":"\u96f7\u6c83\u5c14","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"3":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u4e66\u684c","brand":"\u7c73\u514b","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"4":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u8863\u67dc\uff08\u5b9c\u5bb6\u7279\u4ef7\uff09","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"5":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"1.5\u7c73\u5355\u4eba\u5e8a","brand":"\u81ea\u5982\u53cb\u5bb6\u5b9a\u5236","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"6":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"1.5\u7c73\u5355\u4eba\u5e8a\u57ab","brand":"\u81ea\u5982\u53cb\u5bb6\u5b9a\u5236","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"7":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u7eff\u8272\u690d\u7269","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"8":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u82ad\u838e\u2014\u667e\u8863\u67b6","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"9":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u82ad\u838e\u2014\u4fbf\u5229\u76d2","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"10":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u82ad\u838e\u2014\u623f\u95f4\u7f16\u53f7\u724c","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"11":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u5783\u573e\u6876","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"12":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u628a\u624b\u9501\u82af","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"13":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\uff0820140616\u505c\u914d\uff09\u6905\u5b50\uff08\u4eac\u6d32\u76db\u4e16\uff09","brand":"\u4eac\u6d32\u76db\u4e16","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"14":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u5783\u573e\u6876","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"15":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\uff08130527\u914d\u7f6e\uff09\u8863\u67dc\uff08\u67ab\u767d\uff09\uff08\u76db\u7f8e\u83f2\uff09","brand":"\u76db\u7f8e\u83f2","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}},"16":{"unit":"","room_id":"49551","belong":"\u516c\u53f8","name":"\u8863\u67dc\u7ec4\u88c5\u8d39","brand":"","sums":"1","use_status":"1","wyjg_type":null,"remarks":{"type":"text","val":"","val_1":null,"val_2":null}}}}},"listOther":{"uri":"directContract\/creatContractVoucher","book_no":"","step_no":"BJCW81407190062","house_code":"BJTJ84584042_03","source":"wyjg","contract_code":"BJCW81407190062","doorKeyNums":"2","doorKeyisOver":"1","unitKeyNums":"1","unitKeyisOver":"1","unitKeyremarks":"","guardCardNums":"1","guardCardisOver":"1","guardCardremarks":"","letterBoxKeyNums":"0","letterBoxKeyisOver":"1","letterBoxKeyremarks":"","electricCardNums":"1","electricCardisOver":"1","electricCardremarks":"","warterCardNums":"1","warterCardisOver":"1","warterCardremarks":"","gasCardNums":"1","gasCardisOver":"1","gasCardremarks":"","ls_price":"5","ls_isAdvancePay":"1","ls_displayNums":"84.1","ls_balance":"420","ls_isPayAll":"1","ls_unPayMoney":"","ls_remarks":"","rs_price":"0","rs_isAdvancePay":"1","rs_displayNums":"","rs_balance":"","rs_isPayAll":"1","rs_unPayMoney":"","rs_remarks":"","zhs_price":"5","zhs_isAdvancePay":"1","zhs_displayNums":"84.1","zhs_balance":"420","zhs_isPayAll":"1","zhs_unPayMoney":"","zhs_remarks":"","db_price":"0.4883","db_isAdvancePay":"1","db_displayNums":"352","db_balance":"171","db_isPayAll":"1","db_unPayMoney":"","db_remarks":"","rlb_price":"","rlb_isAdvancePay":"1","rlb_displayNums":"","rlb_balance":"","rlb_isPayAll":"1","rlb_unPayMoney":"","rlb_remarks":"","cfmq_price":"2.28","cfmq_isAdvancePay":"1","cfmq_displayNums":"120.5","cfmq_balance":"274","cfmq_isPayAll":"1","cfmq_unPayMoney":"","cfmq_remarks":"","cnmq_price":"0","cnmq_isAdvancePay":"1","cnmq_displayNums":"","cnmq_balance":"","cnmq_isPayAll":"1","cnmq_unPayMoney":"","cnmq_remarks":"","dhf_price":"","dhf_isPayAll":"1","dhf_unPayMoney":"","dhf_remarks":"","dsssf_price":"","dsssf_isPayAll":"1","dsssf_unPayMoney":"","dsssf_remarks":"","wsf_price":"","wsf_isPayAll":"1","wsf_unPayMoney":"","wsf_remarks":"","wlf_price":"","wlf_isPayAll":"1","wlf_unPayMoney":"","wlf_remarks":"","cwf_price":"","cwf_isPayAll":"1","cwf_unPayMoney":"","cwf_remarks":"","308600000001_49551_room_id":"49551","308600000001_49551_room_name":"\u5367\u5ba4","308600000001_49551_1_name":"\u7a7a\u8c03(\u683c\u529b)","308600000001_49551_1_RoomId":"49551","308600000001_49551_1_belong":"\u516c\u53f8","308600000001_49551_1_brand":"\u683c\u529b","308600000001_49551_1_sums":"1","308600000001_49551_1_unit":"","308600000001_49551_1_use_status":"1","308600000001_49551_1_remarks_val":"","308600000001_49551_1_remarks_type":"text","308600000001_49551_2_name":"\u5ea7\u6905","308600000001_49551_2_RoomId":"49551","308600000001_49551_2_belong":"\u516c\u53f8","308600000001_49551_2_brand":"\u96f7\u6c83\u5c14","308600000001_49551_2_sums":"1","308600000001_49551_2_unit":"","308600000001_49551_2_use_status":"1","308600000001_49551_2_remarks_val":"","308600000001_49551_2_remarks_type":"text","308600000001_49551_3_name":"\u4e66\u684c","308600000001_49551_3_RoomId":"49551","308600000001_49551_3_belong":"\u516c\u53f8","308600000001_49551_3_brand":"\u7c73\u514b","308600000001_49551_3_sums":"1","308600000001_49551_3_unit":"","308600000001_49551_3_use_status":"1","308600000001_49551_3_remarks_val":"","308600000001_49551_3_remarks_type":"text","308600000001_49551_4_name":"\u8863\u67dc\uff08\u5b9c\u5bb6\u7279\u4ef7\uff09","308600000001_49551_4_RoomId":"49551","308600000001_49551_4_belong":"\u516c\u53f8","308600000001_49551_4_brand":"","308600000001_49551_4_sums":"1","308600000001_49551_4_unit":"","308600000001_49551_4_use_status":"1","308600000001_49551_4_remarks_val":"","308600000001_49551_4_remarks_type":"text","308600000001_49551_5_name":"1.5\u7c73\u5355\u4eba\u5e8a","308600000001_49551_5_RoomId":"49551","308600000001_49551_5_belong":"\u516c\u53f8","308600000001_49551_5_brand":"\u81ea\u5982\u53cb\u5bb6\u5b9a\u5236","308600000001_49551_5_sums":"1","308600000001_49551_5_unit":"","308600000001_49551_5_use_status":"1","308600000001_49551_5_remarks_val":"","308600000001_49551_5_remarks_type":"text","308600000001_49551_6_name":"1.5\u7c73\u5355\u4eba\u5e8a\u57ab","308600000001_49551_6_RoomId":"49551","308600000001_49551_6_belong":"\u516c\u53f8","308600000001_49551_6_brand":"\u81ea\u5982\u53cb\u5bb6\u5b9a\u5236","308600000001_49551_6_sums":"1","308600000001_49551_6_unit":"","308600000001_49551_6_use_status":"1","308600000001_49551_6_remarks_val":"","308600000001_49551_6_remarks_type":"text","308600000001_49551_7_name":"\u7eff\u8272\u690d\u7269","308600000001_49551_7_RoomId":"49551","308600000001_49551_7_belong":"\u516c\u53f8","308600000001_49551_7_brand":"","308600000001_49551_7_sums":"1","308600000001_49551_7_unit":"","308600000001_49551_7_use_status":"1","308600000001_49551_7_remarks_val":"","308600000001_49551_7_remarks_type":"text","308600000001_49551_8_name":"\u82ad\u838e\u2014\u667e\u8863\u67b6","308600000001_49551_8_RoomId":"49551","308600000001_49551_8_belong":"\u516c\u53f8","308600000001_49551_8_brand":"","308600000001_49551_8_sums":"1","308600000001_49551_8_unit":"","308600000001_49551_8_use_status":"1","308600000001_49551_8_remarks_val":"","308600000001_49551_8_remarks_type":"text","308600000001_49551_9_name":"\u82ad\u838e\u2014\u4fbf\u5229\u76d2","308600000001_49551_9_RoomId":"49551","308600000001_49551_9_belong":"\u516c\u53f8","308600000001_49551_9_brand":"","308600000001_49551_9_sums":"1","308600000001_49551_9_unit":"","308600000001_49551_9_use_status":"1","308600000001_49551_9_remarks_val":"","308600000001_49551_9_remarks_type":"text","308600000001_49551_10_name":"\u82ad\u838e\u2014\u623f\u95f4\u7f16\u53f7\u724c","308600000001_49551_10_RoomId":"49551","308600000001_49551_10_belong":"\u516c\u53f8","308600000001_49551_10_brand":"","308600000001_49551_10_sums":"1","308600000001_49551_10_unit":"","308600000001_49551_10_use_status":"1","308600000001_49551_10_remarks_val":"","308600000001_49551_10_remarks_type":"text","308600000001_49551_11_name":"\u5783\u573e\u6876","308600000001_49551_11_RoomId":"49551","308600000001_49551_11_belong":"\u516c\u53f8","308600000001_49551_11_brand":"","308600000001_49551_11_sums":"1","308600000001_49551_11_unit":"","308600000001_49551_11_use_status":"1","308600000001_49551_11_remarks_val":"","308600000001_49551_11_remarks_type":"text","308600000001_49551_12_name":"\u628a\u624b\u9501\u82af","308600000001_49551_12_RoomId":"49551","308600000001_49551_12_belong":"\u516c\u53f8","308600000001_49551_12_brand":"","308600000001_49551_12_sums":"1","308600000001_49551_12_unit":"","308600000001_49551_12_use_status":"1","308600000001_49551_12_remarks_val":"","308600000001_49551_12_remarks_type":"text","308600000001_49551_13_name":"\uff0820140616\u505c\u914d\uff09\u6905\u5b50\uff08\u4eac\u6d32\u76db\u4e16\uff09","308600000001_49551_13_RoomId":"49551","308600000001_49551_13_belong":"\u516c\u53f8","308600000001_49551_13_brand":"\u4eac\u6d32\u76db\u4e16","308600000001_49551_13_sums":"1","308600000001_49551_13_unit":"","308600000001_49551_13_use_status":"1","308600000001_49551_13_remarks_val":"","308600000001_49551_13_remarks_type":"text","308600000001_49551_14_name":"\u5783\u573e\u6876","308600000001_49551_14_RoomId":"49551","308600000001_49551_14_belong":"\u516c\u53f8","308600000001_49551_14_brand":"","308600000001_49551_14_sums":"1","308600000001_49551_14_unit":"","308600000001_49551_14_use_status":"1","308600000001_49551_14_remarks_val":"","308600000001_49551_14_remarks_type":"text","308600000001_49551_15_name":"\uff08130527\u914d\u7f6e\uff09\u8863\u67dc\uff08\u67ab\u767d\uff09\uff08\u76db\u7f8e\u83f2\uff09","308600000001_49551_15_RoomId":"49551","308600000001_49551_15_belong":"\u516c\u53f8","308600000001_49551_15_brand":"\u76db\u7f8e\u83f2","308600000001_49551_15_sums":"1","308600000001_49551_15_unit":"","308600000001_49551_15_use_status":"1","308600000001_49551_15_remarks_val":"","308600000001_49551_15_remarks_type":"text","308600000001_49551_16_name":"\u8863\u67dc\u7ec4\u88c5\u8d39","308600000001_49551_16_RoomId":"49551","308600000001_49551_16_belong":"\u516c\u53f8","308600000001_49551_16_brand":"","308600000001_49551_16_sums":"1","308600000001_49551_16_unit":"","308600000001_49551_16_use_status":"1","308600000001_49551_16_remarks_val":"","308600000001_49551_16_remarks_type":"text","308600000001_49551_count":"16","Hm_lpvt_038002b56790c097b74c818a80e3a68e":"1405740206","__utmc":"18275762","user_num":"20068146_1405739904_30e5a72da1dfaf80823fb36d3896041d","ziroom_cookie":"uid%3D418cfbed-406f-88e3-3d97-54df1a63aee4%26user_name%3D%E6%AE%B7%E6%A2%93%E6%A1%93%26mobile%3D18801028251%26sign%3D747c528a5a34672fd4f8eb452ff69678%26","ZIROOM_PHONE":"1","Hm_lvt_038002b56790c097b74c818a80e3a68e":"1405387421,1405475376,1405585602,1405739596","__utma":"18275762.1082841729.1405050643.1405585602.1405739596.7","__utmz":"18275762.1405050643.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)","__utmb":"18275762.7.10.1405739596","PHPSESSID":"704ebe5e7cf178f2e3e1f4a499a32da9"}}';
echo indent($arr);
